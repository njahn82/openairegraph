<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Accessing and analysing the OpenAIRE Research Graph Dump with R • openairegraph</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="../../tidyverse.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../../bootstrap-toc.css">
<script src="../../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../pkgdown.js"></script><!-- ugoe --><link href="../../ugoe_bootswatch.css" rel="stylesheet">
<meta property="og:title" content="Accessing and analysing the OpenAIRE Research Graph Dump with R">
<meta property="og:description" content="openairegraph">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:creator" content="@subugoe">
<meta name="twitter:site" content="@subugoe">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../../index.html">openairegraph</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.0.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../../articles/openairegraph.html">Get started</a>
</li>
<li>
  <a href="../../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/SKG2020_submission/skg2020_submission.html">Accessing and analysing the OpenAIRE Research Graph Dump with R</a>
    </li>
    <li>
      <a href="../../articles/intro_h2020/oaire_graph_post.html">Accessing and analysing the OpenAIRE Research Graph data dumps</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/subugoe/openairegraph/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="skg2020_submission_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Accessing and analysing the OpenAIRE Research Graph Dump with R</h1>
                        <h4 class="author">Najko Jahn</h4>
            <address class="author_afil">
      State and University Library Göttingen<br><div class="hidden name"><code>skg2020_submission.Rmd</code></div>

    </address>
</div>

    
    
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p>OpenAIRE has collected and interlinked scholarly data from various openly available sources for over ten years. In December 2019, this European open science network released the OpenAIRE Research Graph Dump <span class="citation">[<a href="#ref-manghi_paolo_2019_3516918" role="doc-biblioref">1</a>]</span>, a big scholarly dataset that comprises metadata about more than 100 million research publications and 18 million research datasets, as well as the relationships between them. These metadata are furthermore connected to open access locations and disambiguated information about persons, organisations and funders.</p>
<p>Like most big scholarly data dumps, the OpenAIRE Research Graph offers many opportunities for data analysis, but working with it can be challenging for data science practitioners <span class="citation">[<a href="#ref-Xia_2017" role="doc-biblioref">2</a>]</span>. One reason is the size of the data release. Although already split into several files, most of these data files are too large to fit into the memory of a moderately equipped personal computer when directly imported into statistical computing environments. Another challenge is the format. Statistical methods require tidy data, i.e. datasets with a rectangular structure made up of unambiguous columns and rows <span class="citation">[<a href="#ref-Wickham_2014" role="doc-biblioref">3</a>]</span>. The dump, however, consists of compressed XML-files following the comprehensive OpenAIRE data model <span class="citation">[<a href="#ref-manghi_paolo_2019_2643199" role="doc-biblioref">4</a>]</span>, from which only certain elements may be needed for a specific data analysis.</p>
<p>In this paper, we will introduce the R package openairegraph that helps to transform the large OpenAIRE Research Graph Dump into relevant small datasets for analytical purposes. It aims at data science practitioners and researchers alike who wish to conduct their own statistical analysis using the OpenAIRE Research Graph, but are wary of handling its large data dumps. Our implementation does not only consist of tools that allow to explore and parse specific information from the OpenAIRE Research Graph Dump. The R package structure also provides a standard way to ensure the computational reproducibility of these tools. To demonstrate the usefulness of our implementation, we will benchmark compliance with the open access mandate in the European HORIZON 2020 funding programme.</p>
</div>
<div id="background" class="section level1">
<h1 class="hasAnchor">
<a href="#background" class="anchor"></a>Background</h1>
<p>R packages are an open and standardized way to write, document, test, and share R code. They are not limited to statistical methods, but can be also used to access, or even disseminate various types of data <span class="citation">[<a href="#ref-wickham_2015" role="doc-biblioref">5</a>]</span>. An increasing proportion of research articles from various fields cite or report about R packages <span class="citation">[<a href="#ref-Tippmann_2014" role="doc-biblioref">6</a>]</span>.</p>
<p>R packages meet generic principles for computational reproducibility: coherent file organisation, separation of data, method and results, and specification of the computational environment <span class="citation">[<a href="#ref-Marwick_2018" role="doc-biblioref">7</a>]</span>. For data science practitioners, R packages, thus, provide a reliable way to re-use code from others. In the field of scholarly data, the rOpenSci initiative provides interfaces to many sources. Before becoming part of the rOpenSci suite, packages are openly reviewed against comprehensive criteria <span class="citation">[<a href="#ref-ropensci_2020_3749013" role="doc-biblioref">8</a>]</span>.</p>
</div>
<div id="implementation" class="section level1">
<h1 class="hasAnchor">
<a href="#implementation" class="anchor"></a>Implementation</h1>
<p>The R package openairegraph, which is available on GitHub as a development version<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>, has two sets of functions. The first set provides helpers to split the dump release into separate, de-coded XML records that can be stored individually. The other set consists of parsers that convert data from these XML files to a table-like data representation following the tidyverse philosophy, a popular approach to practise data science with tidy data <span class="citation">[<a href="#ref-tidyverse" role="doc-biblioref">9</a>]</span>. Splitting, de-coding and parsing are essential steps before analysing the OpenAIRE Research Graph.</p>
<p>The function <code>openairegraph::oarg_decode()</code> splits and de-codes each record. Storing the records individually will allow to process the files independent from each other, which is a common approach when working with big data.</p>
<p>Because the dumps are quite large, the function furthermore has a parameter that allows setting a limit, which is helpful for inspecting the output first. By default, a progress bar presents the current state of the process.</p>
<p>So far, there are four parsers available:</p>
<ul>
<li>
<code>openairegraph::oarg_publications_md()</code> retrieves basic publication metadata complemented by author details and access status</li>
<li>
<code>openairegraph::oarg_linked_projects()</code> parses grants linked to publications</li>
<li>
<code>openairegraph::oarg_linked_ftxt()</code> gives full-text links including access information</li>
<li>
<code>openairegraph::oarg_linked_affiliations()</code> parses affiliation data</li>
</ul>
<p>These parsers can be used alone, or together like this:</p>
<p>First, we obtained the locations of the de-coded XML records. After that, we read each XML file using the xml2 <span class="citation">[<a href="#ref-xml2" role="doc-biblioref">10</a>]</span> package, and applied three parsers. We used the future <span class="citation">[<a href="#ref-future" role="doc-biblioref">11</a>]</span> and future.apply <span class="citation">[<a href="#ref-future_apply" role="doc-biblioref">12</a>]</span> packages to enable reading and parsing these records simultaneously with multiple R sessions. Running code in parallel reduces the execution time. Finally, we put together the individually created datasets into one dataset.</p>
<p>Documentation is an essential part of the R package workflow. For each parser, we described the usage, as well as the returned output. The latter is represented as data coding tables with an description of each variables, making it more convenient to grasp the otherwise complex structure of the OpenAIRE Research Graph. While executable examples are provided for each function, an introductory vignette, an executable long-form documentation written in R Markdown<span class="citation">[<a href="#ref-rmarkdown" role="doc-biblioref">13</a>]</span>, demonstrates a workflow using the package. All documentation is automatically rendered to an R manual, and to a package website<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a> created with pkgdown <span class="citation">[<a href="#ref-pkgdown" role="doc-biblioref">14</a>]</span>.</p>
<p>While writing the package, we collected exemplary OpenAIRE Research Graph records and tested our parser against these files. The package provides testthat <span class="citation">[<a href="#ref-testthat" role="doc-biblioref">15</a>]</span> unit testing for these cases to make sure that the parsers work as expected. Along with the general automated checking routines for a R package build, these tests will be executed on a continuous integration services after every code updates. The package is available via GitHub, and can be installed from it. Following good practices for research software citation and preservation, releases are archived via Zenodo, which issues DOIs for persistent identification. Altogether, this release workflow enables that the package is “both archived for reproducibility and actively maintained for reusability” <span class="citation">[<a href="#ref-hasselbring2019fair" role="doc-biblioref">16</a>]</span>.</p>
</div>
<div id="use-case" class="section level1">
<h1 class="hasAnchor">
<a href="#use-case" class="anchor"></a>Use-Case</h1>
<p>A main purpose of the OpenAIRE Research Graph, which links grants to publications and open access full-texts, is monitoring the efficacy of the open access mandates. Here, we will demonstrate how to benchmark the compliance with the open access mandate of the European Commission’s HORIZON 2020 funding programme (H2020) against related funding activities using our implementation. We will focus on projects affiliated with the University of Göttingen. In doing so, we want to take into account that open access mandates generally lead to above-average open access uptake levels. Yet, they can vary by discipline and funding activity <span class="citation">[<a href="#ref-Larivi_re_2018" role="doc-biblioref">17</a>]</span>.</p>
<p>As a start, we imported and transformed the whole h2020_results.gz dump file following the above-described methods. The resulting dataset comprises 84,781 literature publications from 9,008 H2020 projects. After that, we identified H2020 projects with participation from the University of Göttingen using data from CORDIS, the European Commission’s research information portal. We calculated the open access share per project affiliated with the university, and compared them by H2020 funding stream, e.g. European Research Council (ERC) grants or Marie Skłodowska-Curie actions (MCSA).</p>
<div class="figure">
<span id="fig:unnamed-chunk-5"></span>
<img src="skg2020_submission_files/figure-html/unnamed-chunk-5-1.png" alt="Open Access Compliance Rates of Horizon 2020 projects affiliated with the University of Göttingen (purple dots) relative to the overall performance of the corresponding funding activities, visualised as a box plot. Only projects with at least five publications were considered. Data: OpenAIRE Research Graph[@manghi_paolo_2019_3516918]" width="672"><p class="caption">
Figure 1: Open Access Compliance Rates of Horizon 2020 projects affiliated with the University of Göttingen (purple dots) relative to the overall performance of the corresponding funding activities, visualised as a box plot. Only projects with at least five publications were considered. Data: OpenAIRE Research Graph<span class="citation">[<a href="#ref-manghi_paolo_2019_3516918" role="doc-biblioref">1</a>]</span>
</p>
</div>
<p>Figure 1 shows that some H2020-projects with University of Göttingen participation have an uptake of open access to grant-supported publications that is above the average in the peer group. At the same time, others perform below expectation. Together, this provides valuable insights into open access compliance at the institutional level, especially for research administrators who would like to consider differences by research field and grant type while assessing publication practises.</p>
</div>
<div id="discussion-and-conclusion" class="section level1">
<h1 class="hasAnchor">
<a href="#discussion-and-conclusion" class="anchor"></a>Discussion and Conclusion</h1>
<p>In summary, we have presented the R package openairegraph, and described how it helps data science practitioners working primarily in R to access and analyse the OpenAIRE Research Graph Dump. R packages, which follow a standardized structure including documentation and testing, are a well-established way to share code. <!--R code is not limited to statistical methods, but can be also used to access various types of scholarly data sources.--> Wrapping helpers into a R package, allows data science practitioners to explore big scholarly data dumps while shielding them from its complexity. As our use case has demonstrated, this approach provides a reliable way to investigate large variations in scholarly communication in a reproducible manner.</p>
<p>Not all data science practitioners use R. We encourage others to develop helpers for analysing big scholarly data dumps in other programming languages as well. Their implementation can draw from the standardized way how R packaging documents, tests and shares code for statistical analyses. Implementing such tools for statistical computing environments can greatly improve re-use of big scholarly data dumps in quantitative science studies and data-driven decision-making.</p>
</div>
<div id="references" class="section level1 unnumbered">
<h1 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h1>
<div id="refs" class="references">
<div id="ref-manghi_paolo_2019_3516918">
<p>1. Manghi, P. et al.: OpenAIRE Research Graph Dump, (2019). <a href="https://doi.org/10.5281/zenodo.3516918">https://doi.org/10.5281/zenodo.3516918</a>.</p>
</div>
<div id="ref-Xia_2017">
<p>2. Xia, F. et al.: Big scholarly data: A survey. IEEE Transactions on Big Data. 3, 18–35 (2017). <a href="https://doi.org/10.1109/tbdata.2016.2641460">https://doi.org/10.1109/tbdata.2016.2641460</a>.</p>
</div>
<div id="ref-Wickham_2014">
<p>3. Wickham, H.: Tidy data. Journal of Statistical Software. 59, (2014). <a href="https://doi.org/10.18637/jss.v059.i10">https://doi.org/10.18637/jss.v059.i10</a>.</p>
</div>
<div id="ref-manghi_paolo_2019_2643199">
<p>4. Manghi, P. et al.: The OpenAIRE Research Graph Data Model, (2019). <a href="https://doi.org/10.5281/zenodo.2643199">https://doi.org/10.5281/zenodo.2643199</a>.</p>
</div>
<div id="ref-wickham_2015">
<p>5. Wickham, H.: R packages. O’Reilly Media (2015).</p>
</div>
<div id="ref-Tippmann_2014">
<p>6. Tippmann, S.: Programming tools: Adventures with r. Nature. 517, 109–110 (2014). <a href="https://doi.org/10.1038/517109a">https://doi.org/10.1038/517109a</a>.</p>
</div>
<div id="ref-Marwick_2018">
<p>7. Marwick, B. et al.: Packaging data analytical work reproducibly using r (and friends). The American Statistician. 72, 80–88 (2018). <a href="https://doi.org/10.1080/00031305.2017.1375986">https://doi.org/10.1080/00031305.2017.1375986</a>.</p>
</div>
<div id="ref-ropensci_2020_3749013">
<p>8. rOpenSci et al.: Ropensci/dev_guide: Fourth release. Zenodo (2020). <a href="https://doi.org/10.5281/zenodo.3749013">https://doi.org/10.5281/zenodo.3749013</a>.</p>
</div>
<div id="ref-tidyverse">
<p>9. Wickham, H. et al.: Welcome to the tidyverse. Journal of Open Source Software. 4, 1686 (2019). <a href="https://doi.org/10.21105/joss.01686">https://doi.org/10.21105/joss.01686</a>.</p>
</div>
<div id="ref-xml2">
<p>10. Wickham, H. et al.: Xml2: Parse xml. (2019).</p>
</div>
<div id="ref-future">
<p>11. Bengtsson, H.: Future: Unified parallel and distributed processing in r for everyone. (2020).</p>
</div>
<div id="ref-future_apply">
<p>12. Bengtsson, H.: Future.apply: Apply function to elements in parallel using futures. (2020).</p>
</div>
<div id="ref-rmarkdown">
<p>13. Xie, Y. et al.: R Markdown: The definitive guide. Chapman; Hall/CRC, Boca Raton, Florida (2018).</p>
</div>
<div id="ref-pkgdown">
<p>14. Wickham, H., Hesselberth, J.: Pkgdown: Make static html documentation for a package. (2019).</p>
</div>
<div id="ref-testthat">
<p>15. Wickham, H.: Testthat: Get started with testing. The R Journal. 3, 5–10 (2011).</p>
</div>
<div id="ref-hasselbring2019fair">
<p>16. Hasselbring, W. et al.: FAIR and open computer science research software, <a href="http://arxiv.org/abs/1908.05986">http://arxiv.org/abs/1908.05986</a>, (2019).</p>
</div>
<div id="ref-Larivi_re_2018">
<p>17. Larivière, V., Sugimoto, C.R.: Do authors comply when funders enforce open access to research? Nature. 562, 483–486 (2018). <a href="https://doi.org/10.1038/d41586-018-07101-w">https://doi.org/10.1038/d41586-018-07101-w</a>.</p>
</div>
</div>
</div>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p><a href="https://github.com/subugoe/openairegraph" class="uri">https://github.com/subugoe/openairegraph</a><a href="#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p><a href="https://subugoe.github.io/openairegraph/" class="uri">https://subugoe.github.io/openairegraph/</a><a href="#fnref2" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="contents col-md-9">
  <p>Developed by <a href="https://www.sub.uni-goettingen.de/kontakt/personen-a-z/personendetails/person/najko-jahn/">Najko Jahn</a>, <a href="https://www.sub.uni-goettingen.de/">Göttingen State and University Library</a>.</p>
  <p>
    Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.
  </p>
</div>

<div class="col-md-3 hidden-xs hidden-sm">
  <p>
    <a href="https://www.sub.uni-goettingen.de/"><img src="sub_wordmark.jpg" height="17"></a>
  </p>
</div>

      </footer>
</div>

  


  </body>
</html>
